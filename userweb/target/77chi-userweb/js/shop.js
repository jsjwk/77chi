(function(a){if(!(a.History||false)){a.History={options:{debug:false},timer:null,state:"",$window:null,$iframe:null,handlers:{generic:[],specific:{}},extractHash:function(b){var c=b.replace(/^[^#]*#/,"").replace(/^#+|#+$/,"");return c},getState:function(){var b=a.History;return b.state},setState:function(c){var b=a.History;c=b.extractHash(c);b.state=c;return b.state},getHash:function(){var b=a.History;var c=b.extractHash(window.location.hash||location.hash);return c},setHash:function(c){var b=a.History;c=b.extractHash(c);if(typeof window.location.hash!=="undefined"){if(window.location.hash!==c){window.location.hash=c}}else{if(location.hash!==c){location.hash=c}}return c},go:function(e){var b=a.History;e=b.extractHash(e);var d=b.getHash(),c=b.getState();if(e!==d){b.setHash(e)}else{if(e!==c){b.setState(e)}b.trigger()}return true},hashchange:function(h,d,c){var f=a.History;if(!f.nativeSupport&&!f.notSupportTrigger){f.nativeSupport=true;if(f.timer){clearInterval(f.timer)}if(f.firedFirstTime){return false}}else{f.firedFirstTime=true;f.notSupportTrigger=false}var g=f.getHash();f.go(g);return true},bind:function(d,b){var c=a.History;if(b){if(typeof c.handlers.specific[d]==="undefined"){c.handlers.specific[d]=[]}c.handlers.specific[d].push(b)}else{b=d;c.handlers.generic.push(b)}return true},trigger:function(f){var d=a.History;if(typeof f==="undefined"){f=d.getState()}var b,g,c,e;if(typeof d.handlers.specific[f]!=="undefined"){e=d.handlers.specific[f];for(b=0,g=e.length;b<g;++b){c=e[b];c(f)}}e=d.handlers.generic;for(b=0,g=e.length;b<g;++b){c=e[b];c(f)}return true},construct:function(){var b=a.History;a(document).ready(function(){b.domReady()});return true},configure:function(b){var c=a.History;c.options=a.extend(c.options,b);return true},domReadied:false,domReady:function(){var b=a.History;if(b.domRedied){return}b.domRedied=true;b.$window=a(window);b.$window.bind("hashchange",this.hashchange);b.nativeSupport=b.nativeSupport();setTimeout(b.hashchangeLoader,200);return true},nativeSupport:function(d){d=d||a.browser;var c=d.version,b=parseInt(c,10),g=c.split(/[^0-9]/g),f=parseInt(g[0],10),e=parseInt(g[1],10),i=parseInt(g[2],10),h=false;if((d.msie||false)&&b>=8){h=true}else{if((d.webkit||false)&&b>=528){h=true}else{if((d.mozilla||false)){if(f>1){h=true}else{if(f===1){if(e>9){h=true}else{if(e===9){if(i>=2){h=true}}}}}}else{if((d.opera||false)){if(f>10){h=true}else{if(f===10){if(e>=60){h=true}}}}}}}return h},hashchangeLoader:function(){var c=a.History;if(!c.nativeSupport){var b;if(a.browser.msie){c.$iframe=a('<iframe id="jquery-history-iframe" style="display: none;"></iframe>').prependTo(document.body)[0];c.$iframe.contentWindow.document.open();c.$iframe.contentWindow.document.close();var e=false;b=function(){var h=c.getHash();var g=c.getState();var f=c.extractHash(c.$iframe.contentWindow.document.location.hash);if(g!==h){if(!e){c.$iframe.contentWindow.document.open();c.$iframe.contentWindow.document.close();c.$iframe.contentWindow.document.location.hash=h}e=false;c.notSupportTrigger=true;c.$window.trigger("hashchange")}else{if(g!==f){e=true;c.setHash(f)}}}}else{b=function(){var g=c.getHash();var f=c.getState();if(f!==g){c.notSupportTrigger=true;c.$window.trigger("hashchange")}}}c.timer=setInterval(b,2000)}else{var d=c.getHash();if(d){c.$window.trigger("hashchange")}}return true}};a.History.construct()}else{window.console.warn("$.History has already been defined...")}})(jQuery);$.extend($.History,{getNoPageHash:function(b){var a=b||window.location.hash.substr(1);return a.replace(/\-p\d+/ig,"")},getHashByIndex:function(b){var a=window.location.hash.substr(1);a=a.split("-")[b];return a},hashAnalize:function(a){var b=a.indexOf($.History.getHashByIndex(0));return b=b<0?-1:b}});(function(d){d.Paginate=function(f,e){this.init(f,e)};var b=window,a=b.location,c=d(window);d.Paginate.prototype={init:function(l,h){this.config=d.extend({},d.Paginate.defaults,h);var f=this,k=f.config,e=k.currentUpperPage,g=k.subPageNum,j;f.caching=k.cache;f.$data=k.$data||d(null);f.idata=[];f.identity=k.identity;f.$contObj=d(l[0]);f.$pager=d(l[1]);if(!f.$contObj.length||!f.$pager.length){return}f.totalPageNum=k.totalPageNum;f.currentUpperPage=e;f.currentPage=(e-1)*g+1;f.firstSubPageLoaded=false;if(!f.$contObj.children().length){f.clearCont=false;f.loadPage(f.currentPage,1)}else{if(e>1){f.clearCont=true;f.loadPage(f.currentPage,1)}else{if(!f.firstSubPageLoaded){if(g==4){var i=f.currentUpperPage;if(a.pathname.indexOf("/topics")==0){_gaq.push(["_trackPageview","/_trc/pager_topics_sub1_upper"+i])}else{if(a.pathname.indexOf("/category/")==0){_gaq.push(["_trackPageview","/_trc/pager_category_sub1_upper"+i])}else{if(a.pathname.indexOf("/shopping/all")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingall_sub1_upper"+i])}else{if(a.pathname.indexOf("/shopping/bags")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingbags_sub1_upper"+i])}else{if(a.pathname.indexOf("/shopping/shoes")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingshoes_sub1_upper"+i])}else{if(a.pathname.indexOf("/shopping/accessories")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingaccessories_sub1_upper"+i])}else{if(a.pathname.indexOf("/shopping/clothes")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingclothes_sub1_upper"+i])}else{if(a.pathname.indexOf("/shopping/mess")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingmess_sub1_upper"+i])}else{if(a.pathname.indexOf("/shopping/home")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppinghome_sub1_upper"+i])}else{if(a.pathname.indexOf("/shopping/")==0){_gaq.push(["_trackPageview","/_trc/pager_shopping_sub1_upper"+i])}else{if(a.pathname.indexOf("/myhome")==0){_gaq.push(["_trackPageview","/_trc/pager_myhome_sub1_upper"+i])}}}}}}}}}}}}f.firstSubPageLoaded=true}f.setPager()}}},loadPage:function(n,e,i){if(this.loading){this.scrollLoading=false;return}var o=this,m=o.config,k=m.beforeRequest,h=m.subPageNum,f=e&&(n%h===1||h==1),g;if(!e){o.scrollToHash()}o.$pager.css("display","none");o.pagerVisible=false;o.loading=true;o.currentUpperPage=n;if(h>1&&!e){n=(n-1)*h+1}else{if(h>1&&e){o.currentUpperPage=Math.floor((n-0.1)/h)+1}}var j=false;if(n===1){if(!o.firstSubPageLoaded){if(h==4){var l=o.currentUpperPage;if(a.pathname.indexOf("/topics")==0){_gaq.push(["_trackPageview","/_trc/pager_topics_sub1_upper"+l])}else{if(a.pathname.indexOf("/category/")==0){_gaq.push(["_trackPageview","/_trc/pager_category_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/all")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingall_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/bags")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingbags_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/shoes")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingshoes_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/accessories")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingaccessories_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/clothes")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingclothes_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/mess")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingmess_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/home")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppinghome_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/")==0){_gaq.push(["_trackPageview","/_trc/pager_shopping_sub1_upper"+l])}else{if(a.pathname.indexOf("/myhome")==0){_gaq.push(["_trackPageview","/_trc/pager_myhome_sub1_upper"+l])}}}}}}}}}}}}o.firstSubPageLoaded=true}}else{o.firstSubPageLoaded=false}if((!e||f)&&o.clearCont){c.data("isClick",true);if(!o.firstSubPageLoaded){if(h==4){var l=o.currentUpperPage;if(a.pathname.indexOf("/topics")==0){_gaq.push(["_trackPageview","/_trc/pager_topics_sub1_upper"+l])}else{if(a.pathname.indexOf("/category/")==0){_gaq.push(["_trackPageview","/_trc/pager_category_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/all")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingall_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/bags")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingbags_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/shoes")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingshoes_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/accessories")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingaccessories_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/clothes")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingclothes_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/mess")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingmess_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/home")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppinghome_sub1_upper"+l])}else{if(a.pathname.indexOf("/shopping/")==0){_gaq.push(["_trackPageview","/_trc/pager_shopping_sub1_upper"+l])}else{if(a.pathname.indexOf("/myhome")==0){_gaq.push(["_trackPageview","/_trc/pager_myhome_sub1_upper"+l])}}}}}}}}}}}}o.firstSubPageLoaded=true}var q=o.currentUpperPage;if(d.History){var p=d.History.getNoPageHash(o.identity);if(p===d.History.getHashByIndex(0)){p=d.History.getNoPageHash()}hash=p+(q>1?"-p"+q:"");if(a.hash!==hash){a.hash=hash}}j=true;o.$contObj.empty();if(d("#re-favorite:visible").length){SUGAR.PopOut.closeMask()}}if(d.isFunction(k)){k.call(o,j)}o.requestData(n,e,i)},scrollToHash:function(){var g=this,i=g.config,h=d.browser.webkit?d("body"):d("html"),f=d("a[name="+i.hash+"]");if(i.hash&&f.length){var e=f.offset().top-70||0;if(h.scrollTop()>e){h.animate({scrollTop:e},200)}}else{if(d.browser.msie&&d.browser.version==="6.0"){h.animate({scrollTop:0},200)}}},gotoPage:function(f){var e=this;e.clearCont=true;e.loadPage(f,false,true)},refreshPage:function(g){var f=this,e=g||f.currentUpperPage;f.$data=d(null);f.idata=[];f.caching=0;f.halting=true;f.loading=false;f.gotoPage(e)},slidePage:function(e,h){var f=this,g=f.currentUpperPage;f.clearCont=true;f.loadPage(g+e,false,h)},slideSubPage:function(e){var f=this,g=f.currentPage;f.clearCont=true;f.loadPage(g+e,1)},jumpPage:function(){var e=this,f=e.$pager.find("[type=text]").val()||0;if(f){e.clearCont=true;e.loadPage(f)}},prepareNext:function(){var e=this,f=e.currentPage;if(!e.prepare||e.prepare[0]!==f+1){e.requestData(f+1,true,false,true)}},requestOver:function(m,e,n,o,j){var q=this,l=q.config,p=l.afterRequest,g=!q.$contObj.children().length,i=l.subPageNum,f=m%i===1,h;q.currentPage=m;q.caching=2;p.call(q,g,o,j);q.idata=q.idata.concat(n);if(d.isFunction(l.lazyAdd)){l.lazyAdd.call(q,g)}var k=m%i===0||q.currentPage===q.totalPageNum;if(!e||f||k){q.setPager()}if(q.caching){q.$pager.css({display:"block",height:0,overflow:"hidden"})}else{q.$pager.css({display:"block",height:"auto"})}q.pagerVisible=true},requestData:function(l,e,i,m){var o=this,k=o.config,n=k.afterRequest,h=k.subPageNum,g;d("#Paginate-retry").remove();function j(){o.loading=false;if(!o.lazyAdding){var q=d("#onlyproduct-a,#onlyproduct-set a");q.removeClass("onlyproduct-0-no onlyproduct-1-no")}o.$contObj.removeClass("loading");d("#footer").css("position","static").find(".loading2").remove();d("html").css("background","#f7f7f7");if(typeof(fusion2)!="undefined"&&fusion2.canvas){fusion2.canvas.setHeight({height:0})}}if(o.prepare&&o.prepare[0]==l){o.requestOver(l,e,o.prepare[1],o.prepare[2],o.prepare[3]);o.prepare=null;d({}).delay(2000).queue(j);o.scrollLoading=false}else{var f=[].concat(k.arrRequestUrl);if(d.type(f[0])==="object"&&f[0].tagName.toLowerCase()==="form"){var p=d(f[0]);f[0]=p.getFormAction();f[2]=p.paramForm()}d.ajax({type:"GET",url:f[0]+(k.noPage?"":l+f[1]),data:f[2],timeout:20000,success:function(r){if(o.halting&&!i){return}if(i){o.halting=false;o.$contObj.empty();if(d("#re-favorite:visible").length){SUGAR.PopOut.closeMask()}}var s=k.analyzeResponse(r);if(m){o.prepare=[l,s[0],s[1],s[2]];var q=[];d(s[0]).find("img[srcd]").each(function(u,v){var t=d(v);q.push(t.attr("srcd"))});recurseDo(function(t){new Image().src=t.splice(0,1);return[t]},[q],q.length,200)}else{o.requestOver(l,e,s[0],s[1],s[2])}o.scrollLoading=false;j()},error:function(){if(!m){d('<div id="Paginate-retry" class="tc" style="padding:16px 0 0;height:48px">网络繁忙，<a class="lkl redlk" href="javascript:;">点此重试~</a></div>').click(function(q){q.stopPropagation();q.preventDefault();o.requestData(l,e);d(this).remove()}).insertAfter(o.$contObj)}j()}})}},isLoading:function(){return this.loading},setIdentity:function(e){this.identity=e},setPager:function(){var m=this,j=m.config,n=m.currentUpperPage,l=j.nearbyPageNum,k=m.totalPageNum,g=j.subPageNum,i=m.currentPage%g===0||m.currentPage===m.totalPageNum,e="",f;k=Math.floor((k-0.1)/g)+1;var h="";if(i){e=['<div class="pbr"><form><ul class="dib">',n==1?'<li class="nlk dn"><a class="pre" href="javascript:;">&nbsp;</a></li>':'<li><a class="pre" href="javascript:;" pdir="-1" onclick="return false;_gaq.push([\'_trackPageview\', \'/_trc/pager_prebar\']);">&nbsp;</a></li>',n==1?'<li class="cur">1</li>':'<li><a href="javascript:;">1</a></li>',n-l>2?'<li class="ell" >…</li>':"",(function(){var s="";for(var q=n-l;q<=n+l;q++){if(q==n&&q!=1){s+='<li class="cur">'+q+"</li>"}else{if(q>1&&q<=k){var o=[1,2,3,4,5,6,7,8,9,10,20,100],p=0,r="";for(;p<o.length;p++){var t=o[p+1]||99999;if(q>=o[p]&&q<t){r=o[p]+"to"+t}if(k>=o[p]&&k<t){h=o[p]+"to"+t}}s+="<li><a href=\"javascript:;\" onclick=\"_gaq.push(['_trackPageview', '/_trc/pager_num_"+r+"'])\">"+q+"</a></li>"}}}return s})(),n+l<k-1&&!j.hasNext?'<li class="ell" >…</li>':"",n+l<k&&!j.hasNext?"<li><a href=\"javascript:;\" onclick=\"_gaq.push(['_trackPageview', '/_trc/pager_num_"+h+"'])\">"+k+"</a></li>":"",n==k?"":(j.hasNext?'<li class="ell" >…</li>':"")+'<li class="nextpage"><a class="nxt nxtw" href="javascript:;"  pdir="1" '+(n==1?"":"onclick=\"_gaq.push(['_trackPageview', '/_trc/pager_nxtbar']);\"")+">下一页</a></li>",(k>10&&!j.hasNext?['<li class="pbrw">共 ',k," 页 到</li>",'<li><input type="text" class="gti" /></li>','<li class="pbrw" >页</li>','<li><a class="gtb" href="javascript:;" target="_self" pdir="jump" onclick="_gaq.push([\'_trackPageview\', \'/_trc/pager_jump\'])"><button type="button"><u>确定</u></button></a></li>'].join(""):""),"</ul></form></div>"].join("");m.$pager.find(".pbr").remove();m.$pager.append(e);m.$pager.find("form").submit(function(o){o.preventDefault();m.jumpPage()});m.pageJumpInpLimit(m.$pager.find("input[type=text]")[0],k)}else{m.$pager.find(".pbr").remove();m.$pager.append(e)}if(!m.isEventSetting){m.addEventOnPagerClick();m.isEventSetting=true}d("#gotonext").css("display","block");if(m.$pager.children().length){d("#gotonext").css("visibility",m.$pager.find(".nxt").length?"visible":"hidden")}m.$pager.css({width:m.$contObj.closest("div.layer").css("width"),marginLeft:m.$contObj.css("marginLeft")});m.pagerVisible=true;m.doLazyAdd()},addEventOnPagerClick:function(){var e=this;e.$pager.click(function(i){i.stopPropagation();i.preventDefault();var h=i.target;if(h&&h.tagName&&h.tagName.toLowerCase()!="a"){h=d(h).closest("a")[0]}if(h&&h.tagName&&h.tagName.toLowerCase()==="a"&&!d(h.parentNode).hasClass("nlk")){var f=parseInt(h.innerHTML),g=h.getAttribute("pdir");if(f){e.gotoPage(f)}else{if(g==="jump"){e.jumpPage()}else{if(g==="sub"){e.slideSubPage(1)}else{if(g=parseInt(g)){e.slidePage(g)}}}}}})},doLazyAdd:function(e,i){var h=this,l=h.config,e=d.type(e)==="undefined"?c.scrollTop():e,g=h.$contObj.data("colY"),k=h.$pager.offset().top-e-WH,j=Math.max.apply(Math,g),f=Math.min.apply(Math,g);if(!h.lazyAdding&&h.pagerVisible&&d.isFunction(l.lazyAdd)&&h.caching&&(i||k<l.scrollBias||k<j-f)){l.lazyAdd.call(h)}},doLoadNext:function(){var e=this,g=e.config,f=e.currentPage%g.subPageNum===0||e.currentPage===e.totalPageNum;if(!e.lazyAdding&&!e.halting&&!e.scrollLoading&&e.pagerVisible&&(e.caching<2||!e.caching)&&!f){e.scrollLoading=true;e.slideSubPage(1)}},pageJumpInpLimit:function(f,e){if(this.config.pageJumpLimit){d(f).keyup(function(i){i.stopPropagation();if(!(i.keyCode>=37&&i.keyCode<=40||i.keyCode==46||i.keyCode==8)){var g=parseInt(this.value)||0;var h=e||0;if(g>h){this.value=h}else{if(g<1){this.value=1}else{this.value=g}}}})}}};d.Paginate.defaults={hasNext:false,identity:"",hash:"",subPageNum:10,scrollBias:400,pageJumpLimit:true,noPage:false,arrRequestUrl:[],beforeRequest:function(){},afterRequest:function(){},lazyAdd:function(){},currentUpperPage:1,itemPerPage:20,totalPageNum:0,nearbyPageNum:3}})(jQuery);$.Masn=function(b,a){this.init(b,a)};$.Masn.defaults={onAppend:undefined,onArrange:undefined,firstHeight:0,firstColumnWidth:undefined,columnWidth:245,initAppendCounts:24,recurseDelay:10,animationOptions:undefined,recurseDo:false,rightAlignFirstBlock:false};$.Masn.prototype={init:function(d,b){this.opts=$.extend({},$.Masn.defaults,b);var a=this,e=a.opts;a.$dom=$(d);a._setFirstTime();a.arrangeContents()},_setFirstTime:function(){var f=this,b=[],e=f.$dom,g=f.opts;e.css({position:"relative"});f.colw0=f.colw=g.columnWidth;if(g.firstColumnWidth){f.colw0=g.firstColumnWidth}f.colCount=Math.max(Math.floor((e.width()-f.colw0+f.colw)/f.colw),1);for(var d=0;d<f.colCount;d++){b[d]=0}f.$dom.data("colY",b);var a=$("<div>");e.prepend(a);f.offset0=a.offset();f.domtop0=e.offset().top;f.left0=Math.round(a.position().left);a.remove();f.lastscreen=f.screen=0;if(g.firstHeight){f.firstWidth=f.colw0;f.firstHeight=g.firstHeight}},resetCols:function(){var c=this,a=[];for(var b=0;b<c.colCount;b++){a[b]=0}c.$dom.data("colY",a)},setHeight:function(){var b=this,a=b.$dom.data("colY");if(typeof(fusion2)!="undefined"&&fusion2.canvas){b.$dom.css("height",Math.max.apply(Math,a)).data("colY",a);fusion2.canvas.setHeight({height:0})}else{b.$dom.css({height:Math.max.apply(Math,a.concat(WH-b.domtop0))}).data("colY",a)}},arrangeContents:function(){var b=this,a=b.$dom,h=b.opts,f=h.initAppendCounts,g=b.firstHeight?f:f,d;d=a.children().filter(".dym");if(d.length){var e=d.slice(0,g);d=d.slice(g).addClass("dymh");b.appendContents(e,null,false,f,$.noop)}a.css("visibility","visible");if($.isFunction(h.onArrange)){h.onArrange(d)}},appendContents:function(h,e,m,d,k){var l=this,s=l.opts,g=l.$dom,q=!m&&l.firstHeight,a=g.data("colY"),i,r;l.lastscreen=l.screen;var b=l._optimizeResponse(h.add(e).removeClass("dymh")),p=b[0],u=b[1];if(q&&!s.rightAlignFirstBlock){p=$('<div class="dymf" style="position:absolute;overflow:hidden;line-height:0;font-size:0;width:'+l.firstWidth+"px;height:"+l.firstHeight+'px"></div>').add(p)}else{if(q){var o=p.filter(":lt("+(l.colCount-1)+")"),n=p.filter(":gt("+(l.colCount-2)+")"),j;j=$('<div class="dymf" style="position:absolute;overflow:hidden;line-height:0;font-size:0;width:'+l.firstWidth+"px;height:"+l.firstHeight+'px"></div>').add(n);p=o.add(j)}}l.appending=true;p.each(function(w,x){var v=$(x),t=parseInt(v.data("ht"));r=Math.min.apply(Math,a);var w=a.length,c={top:r};while(w--){if(a[w]==r){i=w}}c.left=l.colw*i+l.left0+(i?l.colw0-l.colw:0);v.css(c).appendTo(g);try{t=t?t:v.outerHeight(true)}catch(x){}var f=v.data("id")+"";if(f&&$.type("MASONRYUNITS")!="undefined"&&MASONRYUNITS[f]){MASONRYUNITS[f].ht=t;MASONRYUNITS[f].top=c.top;MASONRYUNITS[f].left=c.left}a[i]+=t;g.data("colY",a);l.screen=Math.ceil((r+t)/WH);v.addClass("sc"+l.screen+" co"+i)});if(s.recurseDo){l._recurseDo(function(f,t){var c=0;f.not(".dymf").append(function(v){c++;return t.eq(v).children()});f=f.slice(d);t=t.slice(c);l.setHeight();s.onAppend(f);return[f,t]},[p,u],Math.ceil(p.length/d),s.recurseDelay,function(){k(l.lastscreen,l.screen)})}else{p.not(".dymf").append(function(c){return u.eq(c).children()});l.setHeight();s.onAppend(p);k(l.lastscreen,l.screen)}},orderUnits:function(){var b=this,a=b.$dom;a.find(".dymh").appendTo(a)},_recurseDo:function(c,a,e,b,d){if(e==0){if($.isFunction(d)){d()}return}a=c.apply(null,a);if(a[0].length){setTimeout(function(){this._recurseDo(c,a,--e,b,d)},b)}else{if($.isFunction(d)){d()}}},_optimizeResponse:function(e){var c=this,b=c.$dom,g=b.prev(),a=!!g.length,f="",d=$(null);if(!a||a&&!g.hasClass("tmpmasn")){g=$('<div class="tmpmasn '+b.attr("class")+'" style="position:relative;height:0;overflow:hidden;margin:0;padding:0;"></div>').removeClass("pagecont masoned loading mtctrl");b.before(g)}d=g.append(e).find("div.dym").each(function(k,l){var j=$(l),h=j.data("ht")||j.outerHeight(true);f+='<div class="dym" data-id="'+j.data("id")+'" data-ht="'+h+'"></div>'});g.empty();return[$(f),d]}};var template=function(b,a){return template[typeof a=="object"?"render":"compile"].apply(template,arguments)};(function(m,w){m.version="1.4.0",m.openTag="<%",m.closeTag="%>",m.parser=null,m.render=function(c,a){var f=h(c);return f===undefined?p({id:c,name:"Render Error",message:"Not Cache"}):f(a)},m.compile=function(e,l){function a(r){try{return(new f(r)).template}catch(i){return c?(i.id=e||l,i.name="Render Error",i.source=l,p(i)):m.compile(e,l,!0)(r)}}var c=arguments[2];typeof l!="string"&&(c=l,l=e,e=null);try{var f=k(l,c)}catch(n){return n.id=e||l,n.name="Syntax Error",p(n)}return a.prototype=f.prototype,a.toString=function(){return f.toString()},e&&(g[e]=a),a},m.helper=function(c,a){q[c]=a};var g={},b="".trim,j=b&&!w.document,x={},d=function(){var a=Array.prototype.forEach||function(i,c){var l=this.length>>>0;for(var f=0;f<l;f++){f in this&&i.call(c,this[f],f,this)}};return function(c,e){a.call(c,e)}}(),v=Object.create||function(c){function a(){}return a.prototype=c,new a},q=m.prototype={$forEach:d,$render:m.render,$getValue:function(a){return a===undefined?"":a}};d("break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield".split(","),function(a){x[a]=!0});var k=function(B,G){function s(c){return F+=c.split(/\n/).length-1,c=c.replace(/('|"|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),c=H[1]+"'"+c+"'"+H[2],c+"\n"}function a(f){var c=F;return I?f=I(f):G&&(f=f.replace(/\n/g,function(){return F++,"$line="+F+";"})),f.indexOf("=")===0&&(f=f.substring(1).replace(/[\s;]*$/,""),b&&(f="$getValue("+f+")"),f=H[1]+f+H[2]),G&&(f="$line="+c+";"+f),o(f),f+"\n"}function o(c){c=c.replace(/\/\*.*?\*\/|'[^']*'|"[^"]*"|\.[\$\w]+/g,""),d(c.split(/[^\$\w\d]+/),function(f){if(/^this$/.test(f)){throw {message:'Prohibit the use of the "'+f+'"'}}if(!f||x.hasOwnProperty(f)||/^\d/.test(f)){return}O.hasOwnProperty(f)||(D(f),O[f]=!0)})}function D(f){var c;f==="print"?c=r:f==="include"?c=Q:q.hasOwnProperty(f)?c="$helpers."+f:c="$data."+f,z+=f+"="+c+","}var J=m.openTag,M=m.closeTag,I=m.parser,P=B,K="",F=1,O={$out:!0,$line:!0},z="var $helpers=this,"+(G?"$line=0,":""),H=b?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],L=b?"if(content!==undefined){$out+=content;return content}":"$out.push(content);",r="function(content){"+L+"}",Q="function(id,data){if(data===undefined){data=$data}var content=$helpers.$render(id,data);"+L+"}";d(P.split(J),function(i,c){i=i.split(M);var l=i[0],f=i[1];i.length===1?K+=s(l):(K+=a(l),f&&(K+=s(f)))}),P=K,G&&(P="try{"+P+"}catch(e){e.line=$line;throw e}"),P=z+H[0]+P+"this.template="+H[3];try{var u=new Function("$data",P),A=u.prototype=v(q);return A.toString=function(){return this.template},u}catch(e){throw e.temp="function anonymous($data) {"+P+"}",e}},h=function(a){var e=g[a];if(e===undefined&&!j){var c=document.getElementById(a);return c&&m.compile(a,c.value||c.innerHTML),g[a]}if(g.hasOwnProperty(a)){return e}},p=function(c){function a(){return a+""}var f="[template]:\n"+c.id+"\n\n[name]:\n"+c.name;return c.message&&(f+="\n\n[message]:\n"+c.message),c.line&&(f+="\n\n[line]:\n"+c.line,f+="\n\n[source]:\n"+c.source.split(/\n/)[c.line-1].replace(/^[\s\t]+/,"")),c.temp&&(f+="\n\n[temp]:\n"+c.temp),w.console&&console.error(f),a.toString=function(){return"{Template Error}"},a}})(template,this),typeof module!="undefined"&&module.exports&&(module.exports=template);var MASONRYUNIT,MASONRYUNITJOIN,MASONRYUNITS={},MASONRYUNITSLEN=0,MASONRYUNITSOURCE=[],MASONRYUNITJSON=[];(function(){var f=navigator.userAgent.toString().toLowerCase(),c=!!f.match(/ipad/ig),g=$.browser.msie,b=!c,d=$("#dym-area").data("spm"),a=d?"&"+d:"";MASONRYUNITSOURCE=['<% for (var i = 0; i < list.length; i ++) { %> <% var u = list[i],aidx = $unit(u.id,u); %> <% if(!aidx) continue; %> <div class="dym" <%=u.ht ? "data-ht=\'"+u.ht+"\'" : ""%> data-id="<%=u.id%>"><div class="j"> <div class="mbpho" style="height:<%=piclm ? 200 : u.iht > 800 ? 800 : u.iht %>px;"><a target="_blank" class="a" href="<% if( u.ourl ){ %><%=u.ourl%><% }else{ %>/people/mblog/<%=u.id%>/detail/<% } %>"><img <%=srcd ? "srcd" : "src"%>="<%=u.isrc%>" data-rootid="<%=u.rid%>" <%=piclm ? "" : "height="+u.iht%>/><%=!piclm && u.iht > 800 ? "<u style=\'margin-top:-"+(u.iht-720)+"px\'></u>" : ""%></a> <div class="collbtn" data-favorite=\'{"id":<%=u.id%>,"owner":<%=u.uid%>}\'><a <% if( ruid == u.uid ){ %>class="y re-done" title="去看我的收集" href="/people/mblog/<%=u.id%>/detail/" target="_blank"<% }else if( ruid == u.ruid ){ %>class="y re-done" title="去看我的收集" href="/people/mblog/<%=u.rid%>/detail/" target="_blank"<% }else{ %>class="y" href="#"<% } %> ><%=u.favc%></a><a <% if( ruid == u.ruid || ruid == u.uid ){ %>class="z re-zan" href="/people/mblog/<%=u.id%>/detail/"<% }else{ %>class="z" href="#"<% } %> ><%=u.zanc%></a><a class="x" href="#"><%=u.repc%></a></div> </div> <div class="d"><span <% if( ruid == u.uid || ruid == u.ruid ){ %>class="d1 d1-done"<% }else{ %>class="d1"<% } %> ><%=u.favc%></span><span <% if( ruid == u.uid || ruid == u.ruid ){ %>class="d2 d2-done"<% }else{ %>class="d2"<% } %> ><%=u.zanc%></span><span class="d3"><%=u.repc%></span></div> <div class="g"><%=$content(u.msg,piclm)%>&nbsp;<%=$price(u,pgsource)%></div><ul> <% if( nopth ){ %> <li class="f"></li> <% }else{ %> <li class="f"><a target="_blank" href="/people/<%=u.uid%>/"><img width="24" height="24" src="<%=u.ava%>"></a><p><a class="p" target="_blank" href="/people/<%=u.uid%>/"><%=$cut(u.unm,16)%></a><%= u.uid == u.ruid ? "&nbsp;发布" : "&nbsp;收集" %>到&nbsp;<% if(u.albid){ %><a target="_blank" href="/album/<%=u.albid%>/"><%=$cut(u.albnm,12)%></a>&nbsp;专辑中<% }else{ %><a target="_blank" href="/album/people/<%=u.uid%>/">默认专辑</a><% } %></p></li> <% } %> <% for(var j = 0; u.cmts && j < u.cmts.length; j ++){ %> <li><a target="_blank" href="/people/<%=u.cmts[j].id%>/"><img width="24" height="24" src="<%=u.cmts[j].ava%>"></a><p><a target="_blank" href="/people/<%=u.cmts[j].id%>/"><% if( ruid == u.cmts[j].id ){ %>我<% }else{ %><%=$cut(u.cmts[j].name,16)%><% } %></a>&nbsp;<%=$content(u.cmts[j].cont,false)%></p></li> <% } %>'+(isSTAFF()?'<div class="clr staf"><% if(u.is_robot){ %><span class="red mr8">机器人</span><% } %><% if(u.sta == 7){ %><a href="javascript:;" data-confirm="/blog/unlock/<%=u.id%>/" class="mblogpass">PASS</a><% }else if( u.sta == 6 ){ %><a href="javascript:;" data-confirm="/blog/unbind/<%=u.id%>/?all=1" class="mblogunblackall">所有解屏</a><% }else{ %><a href="javascript:;" data-confirm="/blog/bind/<%=u.id%>/?all=1" class="mblogblackall">屏蔽all</a><% } %><a href="javascript:;" data-confirm="/people/mblog/<%=u.id%>/delete/" class="mblogdelete">删除</a><a href="javascript:;" data-confirm="/blog/delete_all/<%=u.id%>/" class="mblogdeleteall">删除all</a><% if( list[0].common ){ %><a href="javascript:;" data-confirm="/blog/switchshopping/<%=list[0].rid%>/?opt=on" class="mbloggood">精</a><% }else if( list[0].good ){ %><a href="javascript:;" data-confirm="/blog/switchshopping/<%=list[0].rid%>/?opt=off" class="mblogungood">去精</a><% } %></div>':"")+"</div></div><% } %>"];MASONRYUNITJOIN=[function(h){if(h&&h.length&&$.isPlainObject(h[0])){var i=getUSERID(),m=MASONRYUNITJSON[0],l={list:h,srcd:b,ruid:i,hasrp:m.hasrp,piclm:m.piclm,nopth:m.nopth,pgsource:m.pgsource,condt:!m.piclm&&m.hasrp};var k=template.compile(MASONRYUNITSOURCE[0]);var j=$.trim(k(l));return j}else{return h}}];MASONRYUNIT=[function(l){var o=e(l);if(o){return o}var n=[[],true];var k=$.isPlainObject(l)?l:$.parseJSON(l);if(!k){return n}if(k.success){var p=getUSERID(),s=k.data,j=s.hasrp,i=s.piclm,r=s.nopth,q=s.pgsource,m=!i&&j;MASONRYUNITJSON[0]={hasrp:s.hasrp,piclm:s.piclm,nopth:s.nopth,pgsource:s.pgsource};n=[s.blogs,s.has_next,s.count]}return n},function(q){var t=e(q);if(t){return t}var r=[[],true];var m=$.isPlainObject(q)?q:$.parseJSON(q);if(!m){return r}if(m.success){var k=$(null),u=m.data;for(var p=0,s=u.albums,n=s.length;p<n;p++){var o=s[p].username||"",j=['<div class="dym" data-id="',s[p].id,'" data-ht="328" '+(p==0?'hasnext="'+(u.has_next?"True":"False")+'"':"")+">",'<div class="albbigimg">','<p class="lev2"></p>','<p class="lev1"></p>','<a href="/album/',s[p].id,'/" class="lev0" target="_blank">',(function(){var i="";if(s[p].pics){for(var h=0;h<1&&h<s[p].pics.length;h++){if(h==0){i+="<img "+(b?"srcd":"src")+'="'+dtImageTrans(dtImageTrans(s[p].pics[h]),true,200,200,"c")+'" alt="'+s[p].name+'"/>'}else{}}}return i})(),"</a>",'<p class="lev3"></p>',"<div>",s[p].name.cut(24,"…"),"</div>","</div>","<ul>","<li>",(isSTAFF()||s[p].user_id==getUSERID()?'<a class="r delthisalbum" title="'+s[p].id+'" href="javascript:;">删除</a>':""),"<span>",s[p].count,"个收集 | ",s[p].like_count,"人喜欢</span></li>",'<li class="clr"><a href="/people/',s[p].user_id,'/" target="_blank">','<img src="',s[p].avatar,'" />',o.cut(14,"…"),"</a></li>","<li>"+s[p].desc+"</li>","</ul>","</div>"].join("");k=k.add($(j))}r=[k.toArray(),u.has_next]}return r},function(s){var w=e(s);if(w){return w}var u=[[],true];var m=$.isPlainObject(s)?s:$.parseJSON(s);if(!m){return u}if(m.success){var k=$(null),y=m.data;for(var r=0,v=y.albums,n=v.length;r<n;r++){var q=v[r].username||"",x=v[r].is_like?'<a data-albumlike=\'{"id":'+v[r].id+'}\' class="albumlikebtn albumliked" href="javascript:;">取消喜欢</a>':'<a data-albumlike=\'{"id":'+v[r].id+'}\' class="albumtolike albumlikebtn" href="javascript:;"><u>喜欢</u></a>',t=v[r].desc.replace(/<br\s*\/?>/ig," ").cut(100,"…"),p=v[r].pics,o=p.length,j=['<div data-id="',v[r].id,'" data-ht="',(function(){var h=282;if(t){if(o){h=282}else{h=88}}else{if(o){h=264}else{h=70}}return h})(),'" class="dym" '+(r==0?'hasnext="'+(y.has_next?"True":"False")+'"':"")+">",'<h5><a href="/album/',v[r].id,'/" title="',v[r].name,'" class="b">',v[r].name.cut(60,"…"),'</a>&nbsp;<u class="gray ml8">',v[r].count,"个收集<span>&nbsp;&nbsp;</span></u></h5>",'<a href="/people/',v[r].user_id,'/" class="albpp"><img width="24" height="24" src="',v[r].avatar,'">',q.cut(14,"…"),"</a>","<p>"+t+"</p>",'<div class="likearea"><i class="gray l num">',v[r].like_count,"人喜欢</i>",x,"</div>",(function(){var l='<div class="sep"></div><a class="albpho clr" href="/album/'+v[r].id+'/">',A=5,h="a";if(o<=6){A=5;h="a"}else{if(o<=9){A=7;h="b"}else{if(o<=12){A=10;h="c"}else{if(o<=13){A=13;h="d"}}}}for(var i=0;i<A&&i<o;i++){var z=v[r].pics[i];if(A==5||A==7&&i<5||A==10&&i<4||A==13&&i<3){z=dtImageTrans(dtImageTrans(v[r].pics[i]),true,200,200,"c")}l+='<img class="'+h+i+'" '+(b?"srcd":"src")+'="'+z+'" />'}l+="</a>";return o?l:""})(),"</div>"].join("");k=k.add($(j))}u=[k.toArray(),y.has_next]}return u},function(s){var w=e(s);if(w){return w}var u=[[],true];var m=$.isPlainObject(s)?s:$.parseJSON(s);if(!m){return u}if(m.success){var k=$(null),y=m.data;for(var r=0,v=y.albums,n=v.length;r<n;r++){var q=v[r].username||"",x=v[r].is_like?'<a data-albumlike=\'{"id":'+v[r].id+'}\' class="albumlikebtn albumliked" href="javascript:;">取消喜欢</a>':'<a data-albumlike=\'{"id":'+v[r].id+'}\' class="albumlikebtn" href="javascript:;">喜欢</a>',t=v[r].desc.replace(/<br\s*\/?>/ig," ").cut(92,"…"),p=v[r].pics,o=p.length,j=['<div data-id="',v[r].id,'" data-ht="260" class="dym" '+(r==0?'hasnext="'+(y.has_next?"True":"False")+'"':"")+">",'<p class="lev1"></p><div class="albbigimg clr"><div class="dec clr"><h2><a target="_blank" href="/album/',v[r].id,'/" title="',v[r].name,'">',v[r].name.cut(20,"…"),"</a></h2><span>",v[r].count,"个收集&nbsp;|&nbsp;",v[r].like_count,'人喜欢</span></div><a target="_blank" href="/album/',v[r].id,'/" class="lev0">',(function(){var l="";for(var h=0;h<5&&h<o;h++){var i=v[r].pics[h];l+=h?'<img width="80" height="80" src="'+i+'" />':'<img width="164" height="164" src="'+dtImageTrans(dtImageTrans(i),true,200,200,"c")+'" />'}return l})(),'</a><ul><li><a href="/people/',v[r].user_id,'/" class="nc"><img width="24" height="24" src="',v[r].avatar,'" />',q.cut(14,"…"),'</a></li><li class="decpro"><u>&nbsp;</u>',t,'<i>&nbsp;</i></li><li class="decfav">',x,"</li></ul></div>","</div>"].join("");k=k.add($(j))}u=[k.toArray(),y.has_next]}return u}];function e(l){var j=$.trim(l),m=j.substr(0,1);if(m!="{"&&m!="["){if(j.substr(0,9)==="<!doctype"){return[[],true]}if(b){j=j.replace(/(<img[^>]* class=[\'\"]?i[\'\"]?[^>\"\']*)src/ig,function(n,h){return h+"srcd"})}var i=$(j).filter(".dym"),k=i.attr("hasnext")==="False"?false:true;return[i.toArray(),k]}else{return null}}template.helper("$price",function(h,i){return h.buylnk?'<a class="dymprice bl dib '+(!h.price?"by":"")+'" href="/dj/go2/?mk='+(i?i:"_")+"p_"+h.id+"&ok=gw_"+h.photo_id+"&to="+encodeURIComponent(h.buylnk)+a+'" target="_blank"><u class="_tb" title="去购买">'+(h.price?"￥"+h.price:"&nbsp;")+"</u></a>":""});template.helper("$content",function(k,h){var j=trimLink(k,isSTAFF()&&!h),i=h?j.cut(24,"…"):j;return i});template.helper("$cut",function(i,h){return i.cut(h,"…")});template.helper("$unit",function(i,h){i+="";if(!MASONRYUNITS[i]){MASONRYUNITSLEN++;MASONRYUNITS[i]=h;MASONRYUNITS[i].aidx=MASONRYUNITSLEN;return MASONRYUNITSLEN}else{return 0}})})();var PAGER=[],PAGERNUM=0,MASN=[],WH=$(window).height();function reposCol(a,h,g,f){var d=$("#dym-area"),c=d.find("div.masoned:visible"),b=c.data("colY");if(b&&b[g]){b[g]+=a;var e=Math.max.apply(Math,b);c.data("colY",b).css({height:e});d.find("div.co"+g).each(function(j,l){var k=parseInt(l.style.top);if(k>f){l.style.top=(k+a)+"px"}})}}function swPageDataInit(h,q,M,ah,ad,J,f,ag,a){if(typeof ad==="string"){var y=ad;ad=[];for(var ae=0;ae<M.length;ae++){ad.push(y)}}var b=window,g=b.location,z=$(window),v=$.browser,Q=v.msie,x=Q&&v.version==="6.0",w=Q&&v.version==="7.0",u=Q&&v.version==="8.0",s=Q&&v.version==="9.0",d=v.webkit,e=d&&!navigator.userAgent.toString().match("Chrome"),K=v.mozilla,R=v.opera,k=$.History,V=$(h),O=V.find("."+q[0]),l=V.find("."+q[1]),Y=$("#dym-area"),X=Y.find("div.masoned"),I=10,ab=24,p=100,C=6,F=1,P=400,S=false,c=4,m=parseInt($.Bom.getSubCookie("sg","subpage")),aj=parseInt(Y.data("subp"))||m||c,A=4,E=g.href,t=(E.match(/\/topics/)||E.match(/\/category/)||E.match(/\/blogs\/tag/)||E.match(/\/shopping/))&&typeof localStorage!="undefined"&&localStorage,aa=true,ac,N,D=false,o;$('<a id="gotonext" href="javascript:;" style="visibility:'+(aa?"visible":"hidden")+';"></a><a href="#" id="retotop"></a><a id="gotopre" href="javascript:;"></a>').sidepop({id:"side-retotop",dockSide:"right",width:82,scroll:2,departure:0,baseline:"bottom",bias:16,isFixed:true,zIndex:100,btnset:0});var ak=$("#retotop"),T=$("#gotopre"),ai=$("#gotonext");if(x){p=200;C=12}else{if(w){p=200;C=12}else{if(u){p=200;C=12}else{if(d){F=6;P=800}else{if(e){F=6;P=600}else{if(K){F=6;P=600}else{if(R){C=12;F=2}}}}}}}if(t){if(localStorage.pnum_set_topics){aj=localStorage.pnum_set_topics}else{if(localStorage.pnum_topics&&!m&&(aj+=parseInt(localStorage.pnum_topics/A))){aj=Math.max(4,Math.min(6,aj));$.Bom.setSubCookie("sg","subpage",aj)}}}if($.fn.GAcount){Y.GAcount({cnt:["dym-area"],arr:["dymprice"]})}function j(am,W,L){var B=[];for(var H=0;H<W.length;H++){B.push(L+W[H])}var al=k?k.hashAnalize(B):-1;if(al===-1){am.each(function(an,ao){if($(ao).hasClass("cur")){al=an}})}al=al===-1?0:al;return al}function af(B){var B=parseInt($("#form-"+M[B]).attr("page"))||1,i=k?k.getHash():"";i=i.split("-p");if(i[1]){B=parseInt(i[1])}return B}function G(i){i.find("img[srcd]").each(function(H,W){var B=$(W),L=B.attr("srcd");if(L){B.css("display","none").one("load error",function(){$(this).css({visibility:"visible"});if(x){$(this).css({display:"block"})}else{$(this).fadeIn(400)}}).attr("src",L).removeAttr("srcd")}})}function n(av,ao,B,L){PAGERNUM=av;var ax=l.eq(av),W=ax.find("."+ah[0])[0],ay=ax.find("."+ah[1])[0],aw=parseInt(ay.getAttribute("unitcount")),ar=isNaN(aw),B=B||0,H=getNum(ad[av]),au=B==2?"/4/":ad[av],H=B==2?4:H?H:24,i=ar?2:Math.ceil(aw/H),aB=$.isArray(f)&&$.type(f[av])==="number",ap=$.isArray(J)&&J[av]?J[av]:245,at=aB?ap+f[av]:ap,an=i>2?false:true,al;if(i==0){W.style.height="auto";ay.innerHTML="还没有内容呢";ay.className="pager pager0";return}else{}if(i==1){$("#footer").find("div.footcont").css("visibility","visible")}if(!PAGER[av]){var az,aq=$(null);MASN[av]=new $.Masn(W,{onAppend:G,onArrange:function(aC){if(aC.length){az=2;aq=aC}if(PAGER[av]){PAGER[av].caching=1;PAGER[av].$data=aC}if(ac){clearTimeout(ac)}Z()},rightAlignFirstBlock:$(W).hasClass("dym-r")?true:false,initAppendCounts:ab,firstHeight:aB?ag:0,columnWidth:B==2?960:ap,recurseDelay:I});PAGER[av]=new $.Paginate([W,ay],{cache:az,$data:aq,identity:(L||"!"+M[av]),pageJumpLimit:true,hasNext:an,pageCahe:0,currentUpperPage:ao,totalPageNum:i,subPageNum:q[2]?q[2]:aj,subPageCtr:2,scrollBias:P,hash:"pager-dym",arrRequestUrl:[$("#form-"+M[av])[0],au],beforeRequest:function(aC){if(aC&&typeof(fusion2)!="undefined"&&fusion2.canvas){fusion2.canvas.setScroll({top:34});fusion2.canvas.setHeight({height:400})}$("#footer").find("div.footcont").css("visibility","hidden");$("#form-"+M[av]).find("input.forbegintime").attr("name",this.currentPage==1?"":"begin_time");$("#PL-confirm").css("display","none");if(aC){$(W).addClass("loading");if(MASONRYUNITS){MASONRYUNITS={};MASONRYUNITSLEN=0}if(PAGER[av]){PAGER[av].idata=[];PAGER[av].$data=$(null)}if(ac){clearTimeout(ac)}Z()}else{$("#footer").css({position:"relative",width:960,height:67}).append('<div class="loading2">正在加载</div>');$("html").css("background","#fff")}},analyzeResponse:MASONRYUNIT[B],lazyAdd:function(aD){var aQ=this,aM=aQ.config;if(aQ.$data.length===0&&aQ.idata.length===0){var aL=aQ.currentPage%aM.subPageNum===0||aQ.currentPage===aQ.totalPageNum;aQ.caching=0;if(aL){$("#footer").find("div.footcont").css("visibility","visible");setTimeout(function(){aQ.$pager.css({height:"auto"});if(typeof(fusion2)!="undefined"&&fusion2.canvas){fusion2.canvas.setHeight({height:0})}clearTimeout(ac)},200)}return}aQ.lazyAdding=true;aQ.caching=1;var aO=aQ.$data,aP=aQ.idata,aI=aO&&aO.length||0,aF=aP&&aP.length||0,aE=aI+aF,aJ=aD?Math.max(aE+1,24):C,aN=aI+aF-aJ,aC=true;if(aD&&MASN[av]){MASN[av].resetCols();aC=false}var aH,aG;if(aJ<=aI){aH=aO.slice(0,aJ);aQ.$data=aO.slice(aJ)}else{aH=aO;aQ.$data=$(null);aG=aP.slice(0,aJ-aI);aQ.idata=aP.slice(aJ-aI)}var aK=MASONRYUNITJOIN[B]?MASONRYUNITJOIN[B](aG):aG;MASN[av].appendContents(aH,aK,aC,F,function(aR,aS){if(aN<=0){aQ.caching=0;var aY=aQ.config,aW=aQ.currentPage,aT=aY.subPageNum,aV=aQ.currentPage%aY.subPageNum===0||aQ.currentPage===aQ.totalPageNum;if(aW%aT===0&&aQ.currentPage!=aQ.totalPageNum){setTimeout(function(){aQ.prepareNext()},400)}if(aV){$("#footer").find("div.footcont").css("visibility","visible");setTimeout(function(){aQ.$pager.css({height:"auto"});if(typeof(fusion2)!="undefined"&&fusion2.canvas){fusion2.canvas.setHeight({height:0})}if(aQ.$data.length===0&&aQ.idata.length===0){clearTimeout(ac)}},200);if(aj==4){var aU=aQ.currentPage,aX=aQ.currentUpperPage||aU;if(g.pathname.indexOf("/topics")==0){_gaq.push(["_trackPageview","/_trc/pager_topics_sub4_upper"+aX])}else{if(g.pathname.indexOf("/category/")==0){_gaq.push(["_trackPageview","/_trc/pager_category_sub4_upper"+aX])}else{if(g.pathname.indexOf("/shopping/all")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingall_sub4_upper"+aX])}else{if(g.pathname.indexOf("/shopping/bags")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingbags_sub4_upper"+aX])}else{if(g.pathname.indexOf("/shopping/shoes")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingshoes_sub4_upper"+aX])}else{if(g.pathname.indexOf("/shopping/accessories")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingaccessories_sub4_upper"+aX])}else{if(g.pathname.indexOf("/shopping/clothes")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingclothes_sub4_upper"+aX])}else{if(g.pathname.indexOf("/shopping/mess")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingmess_sub4_upper"+aX])}else{if(g.pathname.indexOf("/shopping/home")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppinghome_sub4_upper"+aX])}else{if(g.pathname.indexOf("/shopping/")==0){_gaq.push(["_trackPageview","/_trc/pager_shopping_sub4_upper"+aX])}else{if(g.pathname.indexOf("/myhome")==0){_gaq.push(["_trackPageview","/_trc/pager_myhome_sub4_upper"+aX])}}}}}}}}}}}}}}else{if(aN<=24){aQ.caching=1}else{aQ.caching=2}aQ.$pager.css({height:0,overflow:"hidden"})}setTimeout(function(){aQ.lazyAdding=false;if(!aQ.loading){var aZ=$("#onlyproduct-a,#onlyproduct-set a");aZ.removeClass("onlyproduct-0-no onlyproduct-1-no")}},200)},function(aR){if(aD){this.setHeight()}G(aR)})},afterRequest:function(aC,aJ,aG){var aN=this;if(aG){aN.totalPageNum=Math.ceil(aG/H)}if(aC){aN.loading=true}var aF=aN.config.hasNext,aM=aN.currentPage,aI=aN.currentUpperPage||aM,aO=aN.totalPageNum,aE;$("#footer").css({position:"static",width:"auto",height:"auto"}).find(".loading2").remove();$("html").css("background","#f7f7f7");aN.$contObj.removeClass("loading");if(aF||aM===aO){if(aJ){aN.totalPageNum=aM+1}else{aN.totalPageNum=aM}}else{if(!aF){if(!aJ){aN.totalPageNum=aM}else{if(aM>aO){aN.totalPageNum=aM+1}}}}var aL=aN.totalPageNum,aD=aN.config.subPageNum,aK=aM%aD===2,aH=aM%aD===0||aM===aL;if(aK){if(aj>4){_gaq.push(["_trackPageview","/_trc/pager_start_"+aj])}else{if(g.pathname.indexOf("/topics")==0){_gaq.push(["_trackPageview","/_trc/pager_topics_sub2_upper"+aI])}else{if(g.pathname.indexOf("/category/")==0){_gaq.push(["_trackPageview","/_trc/pager_category_sub2_upper"+aI])}else{if(g.pathname.indexOf("/shopping/all")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingall_sub2_upper"+aI])}else{if(g.pathname.indexOf("/shopping/bags")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingbags_sub2_upper"+aI])}else{if(g.pathname.indexOf("/shopping/shoes")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingshoes_sub2_upper"+aI])}else{if(g.pathname.indexOf("/shopping/accessories")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingaccessories_sub2_upper"+aI])}else{if(g.pathname.indexOf("/shopping/clothes")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingclothes_sub2_upper"+aI])}else{if(g.pathname.indexOf("/shopping/mess")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingmess_sub2_upper"+aI])}else{if(g.pathname.indexOf("/shopping/home")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppinghome_sub2_upper"+aI])}else{if(g.pathname.indexOf("/shopping/")==0){_gaq.push(["_trackPageview","/_trc/pager_shopping_sub2_upper"+aI])}else{if(g.pathname.indexOf("/myhome")==0){_gaq.push(["_trackPageview","/_trc/pager_myhome_sub2_upper"+aI])}}}}}}}}}}}}_gaq.push(["_trackPageview","/_trc/pager_start"])}if(aH){if(aj>4){_gaq.push(["_trackPageview","/_trc/pager_end_"+aj])}else{if(g.pathname.indexOf("/topics")==0){_gaq.push(["_trackPageview","/_trc/pager_topics_sub3_upper"+aI])}else{if(g.pathname.indexOf("/category/")==0){_gaq.push(["_trackPageview","/_trc/pager_category_sub3_upper"+aI])}else{if(g.pathname.indexOf("/shopping/all")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingall_sub3_upper"+aI])}else{if(g.pathname.indexOf("/shopping/bags")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingbags_sub3_upper"+aI])}else{if(g.pathname.indexOf("/shopping/shoes")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingshoes_sub3_upper"+aI])}else{if(g.pathname.indexOf("/shopping/accessories")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingaccessories_sub3_upper"+aI])}else{if(g.pathname.indexOf("/shopping/clothes")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingclothes_sub3_upper"+aI])}else{if(g.pathname.indexOf("/shopping/mess")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppingmess_sub3_upper"+aI])}else{if(g.pathname.indexOf("/shopping/home")==0){_gaq.push(["_trackPageview","/_trc/pager_shoppinghome_sub3_upper"+aI])}else{if(g.pathname.indexOf("/shopping/")==0){_gaq.push(["_trackPageview","/_trc/pager_shopping_sub3_upper"+aI])}else{if(g.pathname.indexOf("/myhome")==0){_gaq.push(["_trackPageview","/_trc/pager_myhome_sub3_upper"+aI])}}}}}}}}}}}}_gaq.push(["_trackPageview","/_trc/pager_end"])}}})}else{PAGER[av].setIdentity(L);var am=z.data("isClick");if(!PAGER[av].lazyAdding&&!PAGER[av].isLoading()||!am){PAGER[av].lazyAdding=true;PAGER[av].scrollLoading=true;PAGER[av].refreshPage(ao)}}z.removeData("isClick");aa=(ar||(PAGER[av].currentUpperPage)*PAGER[av].config.subPageNum<i);var aA=$("#gotonext");if(aA.length){aA.css("visibility",aa&&!aA.data("loading")?"visible":"hidden")}}function r(){if(O.length){O.hover(function(L){var W=$(this);if(!W.hasClass("cur")){var i=O.index(W),H=W.parent(),B=H.attr("class").replace(/dymswitch-\d+\b/ig,function(al){return al+"to"+i});H.attr("class",B)}},function(L){var W=$(this);if(!W.hasClass("cur")){var i=O.index(W),H=W.parent(),B=H.attr("class").replace(/(dymswitch-\d+)to\d+\b/ig,function(am,al){return al});H.attr("class",B)}});O.tabswitch(function(al,B,am,L,W){var an=al.eq(am).attr("dymtype")||0,i=al.eq(am),ap=af(am),H=al.eq(am).data("pagenum");al.parent().removeClass("dymswitch-"+L+" dymswitch-"+L+"to"+am).addClass("dymswitch-"+am);if(!W){al.each(function(aq,ar){if(!$(ar).data("pagenum")){$(ar).data("pagenum",1)}})}else{z.data("isClick",true);z.data("isTabSw",true);ap=H;if(k){var ao="!"+M[am];if(ao===k.getHashByIndex(0)){ao=k.getNoPageHash()}k.setHash(ao+(ap>1?"-p"+ap:""))}}if(a&&$.isFunction(a)){a(am)}if(MASONRYUNITS){MASONRYUNITS={};MASONRYUNITSLEN=0}if(PAGER[L]){PAGER[L].idata=[];PAGER[L].$data=$(null)}n(am,ap,an,k?k.getHashByIndex(0):"")},{cont:"."+q[1],index:j(O,M,"!")})}}if(k&&!k.getHash()){r()}k&&k.bind(function(B){if(!z.data("isTabSw")){r()}else{z.removeData("isTabSw")}var i=getNum(B)||1;if(i>1&&z.width()>1050){$("#gotopre").css("display","block")}else{$("#gotopre").css("display","none")}if(g.href.indexOf("topics")>-1){_gaq.push(["_trackPageview","/_trc/pager_"+B])}});if(typeof callFavorite!=="undefined"&&$.isFunction(callFavorite)){callFavorite()}if(isSTAFF()&&!!$.fn.confirm){Y.confirm(function(B){var H=$(this),i=H.data("confirm");$.get(i,function(){H.closest("div.dym").fadeOut(150,function(){$(this).remove()})})},"a.mblogdelete",{tipword:"确定要删除？"});Y.confirm(function(B){var H=$(this),i=H.data("confirm");$.get(i,function(){H.closest("div.dym").fadeOut(150,function(){$(this).remove()})})},"a.mblogdeleteall",{tipword:"确定要删除all？"});Y.delegate(".mblogpass","click",function(B){var H=$(this),i=H.data("confirm");$.get(i,function(){H.closest("div.dym").fadeOut(150,function(){$(this).remove()})})});Y.delegate("a.mblogblackall","click",function(B){B.preventDefault();B.stopPropagation();var H=$(this),i=H.data("confirm");if(H.hasClass("normal-no")){return}H.addClass("normal-no").css("opacity","0.5");$.get(i,function(){var L=H.attr("data-confirm");H.removeClass("mblogblackall normal-no").addClass("mblogunblackall").css("opacity","1").html("所有解屏").attr("data-confirm",L.replace("/bind/","/unbind/")).closest("div.dym").css("opacity","0.1")})});Y.delegate("a.mblogunblackall","click",function(B){B.preventDefault();B.stopPropagation();var H=$(this),i=H.data("confirm");if(H.hasClass("normal-no")){return}H.addClass("normal-no").css("opacity","0.5");$.get(i,function(){var L=H.attr("data-confirm");H.removeClass("mblogunblackall normal-no").addClass("mblogblackall").css("opacity","1").html("屏蔽all").attr("data-confirm",L.replace("/unbind/","/bind/")).closest("div.dym").css("opacity","1")})});Y.delegate("a.mbloggood","click",function(H){H.preventDefault();H.stopPropagation();var L=$(this),B=L.html(),i=L.data("confirm");if(L.hasClass("normal-no")){return}L.addClass("normal-no").css("opacity","0.5");$.get(i,function(){var W=L.attr("data-confirm");L.removeClass("mbloggood normal-no").addClass("mblogungood").css("opacity","1").html("去精").attr("data-confirm",W.replace("?opt=on","?opt=off")).closest("div.dym").css("opacity","0.1")})});Y.delegate("a.mblogungood","click",function(H){H.preventDefault();H.stopPropagation();var L=$(this),B=L.html(),i=L.data("confirm");if(L.hasClass("normal-no")){return}L.addClass("normal-no").css("opacity","0.5");$.get(i,function(){var W=L.attr("data-confirm");L.removeClass("mblogungood normal-no").addClass("mbloggood").css("opacity","1").html("精").attr("data-confirm",W.replace("?opt=off","?opt=on")).closest("div.dym").css("opacity","1")})})}if(x||w){ai.add(T).focus(function(){this.blur()})}T.click(function(W){W.preventDefault();W.stopPropagation();$(this).css("display","none");if(PAGER&&PAGER[PAGERNUM]&&MASN&&MASN[PAGERNUM]){var B=Y.find(".pager:visible"),H=B.children().length,i=B.find(".nxt").length,L=H&&i?false:true;if(H&&!i){return}PAGER[PAGERNUM].isPagerClick=true;if(L){PAGER[PAGERNUM].loading=false;PAGER[PAGERNUM].lazyAdding=true;PAGER[PAGERNUM].halting=true}PAGER[PAGERNUM].slidePage(-1,true);_gaq.push(["_trackPageview","/_trc/pager_arrow_pre"])}});ai.click(function(W){W.preventDefault();W.stopPropagation();$(this).css("display","none");if(PAGER&&PAGER[PAGERNUM]&&MASN&&MASN[PAGERNUM]){var B=Y.find(".pager:visible"),H=B.children().length,i=B.find(".nxt").length,L=H&&i?false:true;if(H&&!i){return}PAGER[PAGERNUM].isPagerClick=true;if(L){PAGER[PAGERNUM].loading=false;PAGER[PAGERNUM].lazyAdding=true;PAGER[PAGERNUM].halting=true}PAGER[PAGERNUM].slidePage(1,true);if(t&&!localStorage.pnum_set_topics){var an=parseInt(localStorage.pnum_topics),an=an>0?an:0,an=an+(L?-3:1),am=(aj+1-c)*A,al=(aj-1-c)*A;if(an>am){an=am}else{if(an<al){an=al}}localStorage.setItem("pnum_topics",an)}_gaq.push(["_trackPageview","/_trc/pager_arrow"+(L?"_direct":"_end")])}}).hover(function(){T.addClass("hov")},function(){T.removeClass("hov")});ak.click(function(H){H.preventDefault();var i=this;S=true;var B=d?$("body"):$("html");B.animate({scrollTop:0},200,function(){$(i).css("visibility","hidden");S=false})});if(t){if(aj>4){$("#gotonext").attr("title","右键设置")}$("#gotonext")[0].oncontextmenu=function(al){var am=$(this).offset(),B=$("#set-page"),H=localStorage.pnum_set_topics;if(!B.length){B=$('<div id="set-page"><div id="set-page-title"><a href="#">关闭</a>每页长度设置(数字越大，页面越长)</div><div id="set-page-tip"></div><div class="clr"><a class="first" href="#" set-page="default" title="子页数在4-6之间自动调整">使用默认设置</a><a href="#">4</a><a href="#">5</a><a href="#">6</a><a href="#">7</a><a href="#">8</a><a href="#">9</a><a href="#">10</a><a href="#">11</a><a href="#">12</a><a href="#">13</a><a href="#">14</a><a href="#">15</a><a href="#">16</a><a href="#">17</a><a href="#">18</a><a href="#">19</a><a href="#">20</a><a href="#">21</a><a href="#">22</a><a href="#">23</a><a href="#">24</a><a href="#">25</a><a href="#">26</a><a href="#">27</a><a href="#">28</a><a href="#">29</a><a href="#">30</a><a href="#">31</a><a href="#">32</a><a href="#">33</a><a href="#">34</a><a href="#">35</a><a href="#">36</a><a href="#">37</a><a href="#">38</a><a href="#">39</a><a href="#">40</a><a href="#">41</a><a href="#">42</a><a href="#">43</a><a href="#">44</a><a href="#">45</a><a href="#">46</a><a href="#">47</a><a href="#">48</a><a href="#">49</a><a href="#">50</a><a id="set-page-readme" href="/group/topic/1621/">[使用说明]</a></div></div>').appendTo("body").click(function(i){i.stopPropagation()}).delegate(".clr a","click",function(ap){if(this.id==="set-page-readme"){return true}ap.preventDefault();var aq=$(this),i=parseInt(aq.text()),ao=aq.attr("set-page"),an=ao==="default"?true:false;B.find(".cur").removeClass("cur");if(an){localStorage.removeItem("pnum_set_topics")}else{if(100>=i&&4<=i){localStorage.setItem("pnum_set_topics",i)}}aq.addClass("cur");B.find("div.clr").css("display","none");B.find("#set-page-tip").html("<span>设置成功</span>，刷新页面即可见效。<br/>你当前的页面长度设置为 <span>"+(i?i:"默认设置")+"</span> 。如果遇到问题，可以选择“使用默认设置”。").css("display","block")});$("#set-page-title").find("a").click(function(i){i.stopPropagation();i.preventDefault();$("#set-page").css("display","none")});if(H){var W=B.find("a");for(var L=0;L<W.length;L++){if(W.eq(L).text()==H){W.eq(L).addClass("cur");break}}}else{B.find("a[set-page=default]").addClass("cur")}}B.find("#set-page-tip").empty().css("display","none").end().find("div.clr").css("display","block");B.css({display:"block",top:am.top-z.scrollTop()+38,right:82});return false};$(document).click(function(i){$("#set-page").css("display","none")})}function Z(){if(!S){var am=z.scrollTop();if(PAGER[PAGERNUM]&&!PAGER[PAGERNUM].lazyAdding&&am+WH>$("body").height()-P){PAGER[PAGERNUM].doLazyAdd(am,true);PAGER[PAGERNUM].doLoadNext()}if(!D){if(Y.length){var an=Y.find(".pager:visible"),L=an.children().length,B=an.find(".nxt").length;T.add(ai).css("visibility",am>Y.position().top&&(!L||L&&B)?"visible":"hidden")}var ao=$("#collbtn");if(!getUSERID()&&U&&am>=1000&&g.pathname.indexOf("/event/")!=0){SUGAR.PopOut.login();U=false}if(ao.length&&!x){var ap=Y.data("offset");if(ap){var H=ao.closest("div.dym"),i=parseInt(H.css("top"))||0,W=ap.top,al=70;if(am-(W+i)-20+8+al>0){var aq=H.offset().left+18;H.find(".collbtn").css({left:aq,position:"fixed",top:8+al,display:"block"})}else{H.find(".collbtn").css({position:"absolute",left:6,top:8,display:"block"})}}}if(PAGER[PAGERNUM]){if(!x&&!w&&!u){PAGER[PAGERNUM].doLazyAdd(am);PAGER[PAGERNUM].doLoadNext()}}}}clearTimeout(ac);ac=setTimeout(Z,100)}var U=true;z.scroll(function(){D=true;clearTimeout(N);N=setTimeout(function(){D=false},p)});z.bind("resize.pageData",function(){WH=z.height()})}$(function(){var c=window.location.href.indexOf("/app/")!==-1;var a=$(window).width();var d="",b;if(a>1040){d+='<div id="side-fullfeed"><a id="leavmesstoduitang" class="lkn graylk" href="/leave/message/" target="_blank">给堆糖提提意见</a>';if(!c){d+='<div class="side-apps"><span class="apps-pa clr"><a href="/app/duitang/?from=side" class="side-fst"><b class="sd-duitang">&nbsp;</b>堆糖</a><a href="/app/huabao/?from=side"><b class="sd-huabao">&nbsp;</b>堆糖画报</a><a href="/app/shopping/?from=side"><b class="sd-shop">&nbsp;</b>堆糖良品购</a><a class="side-lst" href="/app/bizhi/?from=side"><b class="sd-bizhi">&nbsp;</b>爱疯了壁纸</a></span><a href="javascript:;" class="apps-name">移动应用<u>&nbsp;</u></a></div>'}d+="</div>";$(d).sidepop({id:"side-feedback",width:57,dockSide:"left",departure:-1,baseline:"top",bias:160,position:"body",btnset:0,scroll:1,isFixed:1})}if(!c){$(".side-apps").hover(function(){var e=$(this);clearTimeout(b);b=setTimeout(function(){e.addClass("hover").animate({"padding-left":"126px"},300)},100)},function(){clearTimeout(b);$(this).removeClass("hover").animate({"padding-left":"8px"},300)})}});$(function(){$("#m-s").addClass("cur");var a=$(".ctg-menu-list"),b=location.hash.slice(1),d,c;if(b){b.split("=").length===2&&a.find("h3 span").text(b.split("=")[1])}swPageDataInit(document,["dymswitch-a","dymswitch-b"],["hot","new"],["pagecont","pager"],"",[245,245],[0,0],0);$("body").delegate("a","mousedown",function(g){var i=$(this);var f=i.data(f).h;if(f&&!i.data("clicked")){_gaq.push(["_trackPageview","/_trc/shopping/item/"+f]);i.data("clicked",true)}else{return}})});